<html>
	<head>
		<meta http-equiv=Content-Type content="text/html;charset=utf-8">
		<title>Map Editor</title>
		<link rel="stylesheet" href="css/style.css">
		<script type="text/javascript" src="js/util.js"></script>
		<script type="text/javascript" src="js/main.js"></script>
	</head>
	
	<script>
		function __initEvent(){
			var layers = document.getElementsByName("layers");
			for(var i = 0;i<layers.length;i++){
				layers[i].addEventListener("click",function(){
					if(!this.checked){
						//context2.alpha = 0.1;
						context3.globalAlpha = 0.1;
						var data = context.getImageData(0,0,1024,768);
						console.log(data);
						context3.drawImage(canvas2,0,0,1024,768,0,0,1024,768);
						context2.clearRect(0,0,1024,768);
						context2.drawImage(canvas3,0,0,1024,768,0,0,1024,768);
					}
				});
			}
		}
		function start(){
			SrcMapManager.init();
			TargetMapManager.init();
			ToolManager.init();
		}
	</script>
	<body onload="start()">
		<div class="container">
			<div class="leftPanel">
				<div class="options">地图大小,
				x:<input type="number" id="mapSizeX" value="1024" min="100"> y:<input type="number" id="mapSizeY" value="768" min="100">
				<button name="mapSizer" id="mapSizer">确定</button>
				</div>
				<canvas id="srcCanvas" width="300" height="600"></canvas>
			</div>
			<div class="tools">
				<button id="deleteClip" value="delete">进入删除模式</button>
				<fieldset>
					<legend>图层</legend>
					<input type="radio" name="layers" value="bg" checked>背景</input>
					<input type="radio" name="layers" value="jz">建筑</input>
				</fieldset>
			</div>
			<div class="rightPanel">
				<canvas id="targetCanvas" width="1024" height="768"></canvas>
			</div>
		</div>
		<canvas id="hiddenCanvas" width="1024" height="768" style="display:none"></canvas>
	</body>
</html>